const $="https://hudson-properties.vercel.app";document.addEventListener("DOMContentLoaded",async()=>{const n=new URLSearchParams(window.location.search).get("id"),s=document.querySelector("[dev-target=listing-wrapper]"),a=document.querySelector("[dev-target=image-list-desktop-wrapper]"),c=document.querySelector("[dev-target=listing-loader]"),l=document.querySelector("[dev-target=image-item-desktop-template]"),g=document.querySelector("[dev-target=image-item-tablet-wrap]"),d=document.querySelector("[dev-target=image-item-tablet-template]"),m=document.querySelector("[dev-target=title]"),p=document.querySelector("[dev-target=price]"),u=document.querySelector("[dev-target=floor-plan]"),h=document.querySelector("[dev-target=description]");if(!s||!c||!a||!l||!g||!d||!m||!p||!u||!h)return console.error("Missing element");if(!n)return console.error("Missing id");try{const e=await y(Number(n));console.log({listing:e}),S({imageItemDesktopTemplate:l,imageItemTabletTemplate:d,imageItemTabletWrap:g,imageListDesktopWrapper:a,listing:e,listingLoader:c,listingWrapper:s,listingDescription:h,listingFloorPlan:u,listingPrice:p,listingTitle:m})}catch(e){console.error("Something went wrong",e)}function S({listing:e,listingWrapper:t,listingLoader:v,imageListDesktopWrapper:b,imageItemDesktopTemplate:T,imageItemTabletWrap:f,imageItemTabletTemplate:q,listingTitle:L,listingPrice:k,listingFloorPlan:D,listingDescription:E}){const I=e.photos.slice(0,3),P=e.photos.slice(0,8);b.innerHTML="",f.innerHTML="",I.map(i=>{const r=T.cloneNode(!0),o=r.querySelector("[dev-target=listing-image]");if(!o)return console.error("dev-target=listing-image not found");o.src=i.original,o.srcset="",b.appendChild(r)}),P.map(i=>{const r=q.cloneNode(!0),o=r.querySelector("[dev-target=listing-image]");if(!o)return console.error("dev-target=listing-image not found");o.src=i.original,o.srcset="",f.appendChild(r)}),window.Webflow.require("slider").redraw(),window.dispatchEvent(new Event("resize")),L.innerText=`${e.bedrooms} BED, ${e.bathrooms} BATH`,k.innerText=`$${Number(e.price).toLocaleString()}`,D.href="#",E.textContent=e.description,w({element:v,toggle:"hide"}),w({element:t,toggle:"show"})}async function y(e){try{const t=await fetch(`${$}/api/listings/${e}`);if(!t.ok)throw new Error("Failed to fetch job");return await t.json()}catch(t){throw console.error("Error fetching job:",t),t}}function w({element:e,toggle:t}){t==="show"?e.setAttribute("dev-hide","false"):e.setAttribute("dev-hide","true")}});
//# sourceMappingURL=listing.js.map
